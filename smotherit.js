(function(a){if(window.mikefsoapi!=="loaded"){var p,q={},i,j={setup:false,grading:false,gradingTrue:false,reportComplete:false,reportGrades:false},r,v,w,k,n=a(window),A={video:{color:"#484a57",regex:/(video|screencast)[ ]*[-:]/i},activity:{color:"#75756d",regex:/(act|activity|read|reading|poll)[ ]*[-:]/i},discussion:{color:"#88a75d",regex:/(disc|discuss|discussion|wimba)[ ]*[-:]/i},assignment:{color:"#e85b00",regex:/(asn|assign|assignment|deliverable|deliver|test)[ ]*[-:]/i},project:{color:"#a84d10",
regex:/(project)[ ]*[-:]/i},gps:{color:"#f44e13",regex:/Professionalism/}};window.mikefsoapi="loaded";a("body > *:not(script)").wrapAll('<div id="ajaxsitwrap"></div>');a("head").append('<link rel="stylesheet" href="http://wddbs.com/~SFW/smotherit/fsokit.css?v=2.19" />');var s=function(c){setTimeout(function(){var b=a(c.dpDiv).find(".ui-datepicker-buttonpane");b.find(".ui-datepicker-close").click(function(){a.datepicker._clearDate(c.input);a(c.input).val("Current");return false}).appendTo(b)},50)},
x=function(){i.find(".smotherBlank").remove()},B=function(c){try{a(p[c-1]).removeClass("sithover")}catch(b){}var e=p[c];if(typeof e!=="undefined"){e=a(e);e.addClass("sithover");a("#loadertext").html("Saving changes, please wait... ("+(c+1)+"/"+p.length+")");var f=a(".forcepushdate").val(),d=a(".forcepulldate").val(),f=f==="Choose"||f==="Current"?e.find('input[name="pushDate"]').val():f,d=d==="Choose"||d==="Current"?e.find('input[name="pullDate"]').val():d;a.ajax({type:"post",dataType:"json",cache:false,
url:"/com/fullsail/lms/service/remote/Delivery.cfc",data:{method:"saveDelivery",_deliveryId:e.find(".deliveryId").val(),_isImportant:0,_isViewable:true,_sortOrder:e.find(".sortOrder").val(),_accessEventUUID:a("[name=accessEventUUID]").val(),returnFormat:"json",_activeDate:f,_inactiveDate:d},success:function(){e.find("input[name=pushDate]").val(f);e.find("input[name=pullDate]").val(d);c++;B(c)},error:function(){alert("A date submission failed, please refresh the page and try again.");o()}})}else o()};
q.setup=function(){x();a(".nameCol").width(317);a(".buttonsCol:first").width(84);a(".buttonsCol:not(:first)").css({paddingLeft:0,width:68});a('<span class="fitemp"><input type="checkbox" class="forceitem" name="forceitem" /></span>').insertBefore(".buttonsCol:not(:first)").css({zIndex:45,paddingRight:3}).find("input").bind("click",function(a){a.stopPropagation()});a(".nameCol:not(:first)").bind("click.smotherit",function(){var c=a(this).parent().find(".forceitem");c.attr("checked",c.attr("checked")==
true?false:true);return false});a('<div class="smotherBox smotherPad"><span style="font-weight:bold;">Change All Checkboxed:</span>&nbsp;&nbsp;&nbsp;<span><em>Push: </em><input class="input_red_no_border_e forcepushdate"  readonly="readonly" name="pushDate" size="9" value="Choose" /></span>&nbsp;&nbsp;<span><em>Pull: </em><input class="input_red_no_border_e forcepulldate" readonly="readonly" name="pullDate" size="9" value="Choose" /></span><span>&nbsp;&nbsp;<button class="submitforces">Save</button>&nbsp;&nbsp;<button class="resetchecks">Uncheck All</button></span></div>').prependTo(i);
a(".input_red_no_border_e").datepicker({dateFormat:"M. dd, y",showButtonPanel:true,closeText:"Use Existing",beforeShow:function(a,b){s(b)},onChangeMonthYear:function(a,b,e){s(e)}});a(".resetchecks").bind("click.smotherit",function(){a("input.forceitem").attr({checked:false})});a(".submitforces").bind("click",function(){y();t.css({display:"block",left:a(window).width()/2-t.innerWidth()/2,top:a(window).height()/2-t.innerHeight()/2});p=a("input.forceitem:checked").parent().parent();B(0)});a("#sortable").selectable({filter:".nameCol",
selected:function(c,b){var e=a(b.selected).parent().find(".forceitem");e.attr("checked",e.attr("checked")==true?false:true)}});a(".nameCol").each(function(){var c=a(this),b=c.text(),e;for(e in A){var f=A[e];if(b.match(f.regex)){c.siblings(".typeCol").css({backgroundColor:f.color});break}}})};q.reportComplete=function(){if(a.browser.mozilla){x();a('<div class="smotherBox smotherPad"><span style="font-weight:bold;">Table styles fixed.</span></div>').prependTo(i);n.unbind("scroll resize");a("body").css({position:"relative"});
a("#content").css({width:"97%",margin:0,background:"none",paddingBottom:"20px",height:"520px"});a("#contentTop").css({background:"none"});a("#contentBottom").remove();a("#rightCol").css({background:"#eaeaea"});a("#leftCol").css({width:"auto",maxWidth:"none",position:"absolute",left:"0",right:"240px",height:"410px",marginBottom:"20px"});var c=a("#classReportsWrapper").css({width:"auto",maxWidth:"none",marginBottom:"20px",overflow:"auto"});c.scrollLeft(0);c.scrollTop(0);var b=a("#classReports");b.css({position:"relative"});
b.find("tbody").css({position:"relative"});var e=a("<thead></thead>").prependTo(b);b.find("tr:first").appendTo(e).css({position:"relative",top:0,left:0,marginTop:0});b.find("tbody tr:first").css({marginTop:0,position:"static"});var f=e.offset().top-40,d=e.offset().left;e.css({position:"fixed",top:f,left:d});b.find("tbody tr").bind("click",function(){a(this).addClass("classReportActive").siblings().removeClass("classReportActive")});var g=b.find("th:first-child").width(),h=b.find("th:first-child, td:first-child").each(function(){var b=
a(this),e=b.offset().top,d=b.offset().left;b.attr("data-top",e);a(this).css({position:"fixed",top:e,left:d,width:g})}).filter("td");h.filter("td:odd").css({background:"white"});a("#classReports tr td:nth-child(202n-200), #classReports th:nth-child(202n-200)").css({paddingLeft:170});n.add(c).bind("scroll.smotherit",function(){e.css({top:f-n.scrollTop(),left:d-c.scrollLeft()});e.find("th:first").css({top:f-n.scrollTop()});h.css("top",function(){return a(this).attr("data-top")-n.scrollTop()-c.scrollTop()})}).trigger("scroll")}};
q.grading=function(){x();a(".col980").css("width","97%");a("#leftCol").css("width","78%");a(".student .studentName").css({width:"auto",marginLeft:143});a(".student .icons").css({width:143}).prepend('<li class="right fsokit-btn kit-grade" style=""><a href="#" title="Quick Grade">G</a></li><li class="right fsokit-btn kit-except" style=""><a href="#" title="Give Exception">X</a></li>');a('<iframe src="http://course.online.fullsail.edu/?fuseaction=lms.enterClassSection&classSectionId='+r+'" width="1" height="1" />').appendTo(document.body).bind("load",
function(){a(this).remove()});var c={};a.ajax({type:"get",global:false,url:"http://faculty.online.fullsail.edu/index.cfm?fuseaction=lms.rosterList",success:function(b){a(b).find(".studentField").each(function(){c[a(this).find(".studentID").text()]=a(this).find("a").text()});a(".student .icons").each(function(){var b=a(this),f=b.closest(".activity").children("h4").text(),d=b.closest(".student").find(".studentName").text(),d=d.slice(d.indexOf("(")+1,d.indexOf(")"));b.prepend('<li class="right fsokit-btn kit-email" style=""><a href="'+
("mailto:"+c[d]+"?subject=Missing%20Activity&body=According%20to%20FSO%2C%20you%20have%20not%20completed%20the%20%22"+f+"%22%20activity.%20%20Please%20contact%20me%20as%20soon%20as%20possible%20if%20this%20is%20in%20error.")+'" title="Email Student">E</a></li>')})}});a('<div class="smotherBox smotherPad"><span style="font-weight:bold;">Enhanced</span></div><div class="smotherBox smotherPad"><button class="sit-open-all-dl">Toggle download panels</button></div>').prependTo(i);a(".activity").each(function(){var b=
a(this).attr("fs:activityid");a(this).find("h4").append('&nbsp;<a href="http://course.online.fullsail.edu/index.cfm?fuseaction=lms.activitiesAssignment&activityId='+b+'" target="_blank" style="font-size:12px; color:#FF1100;" class="kit-preview">(preview)</a>').find(".kit-preview").bind("click",function(a){a.stopPropagation()})});a(".sit-open-all-dl").bind("click",function(){var b=a(".downloads");b[b.is(":visible")?"hide":"show"]();return false});a(".downloadIcon").each(function(){var b=a(this).parent().parent().parent().find(".downloads");
a.ajax({type:"POST",url:"/com/fullsail/lms/service/remote/Asset.cfc",data:{method:"listTaskAssets",_taskId:a(this).parent().parent().parent().attr("fs:taskId"),_accessEventUUID:a("#assignments").attr("fs:accessEventUUID"),returnformat:"json"},dataType:"json",success:function(e){if(e.success==true)if(a(b).empty(),e.results>0)for(var c=0;c<e.results;c++){var d=e.data[c],d="<li><a class='"+d.iconClass+"' href='"+d.assetURL+"'>"+(d.title+"."+d.extension)+"</a></li>";a(b).append(d)}else a(b).append("<li>No files</li>")}})});
a(".student .kit-except a").live("click",function(){var b=a(this),e=b.parent().parent().parent(),c=e.find(".studentName").text(),d=e.find(".gradeIcon").attr("href"),g=d.substring(d.indexOf("activityId=")+11,d.indexOf("&deliveryId")),j=d.substring(d.indexOf("deliveryId=")+11,d.indexOf("&accountId")),i=d.substring(d.indexOf("accountId=")+10,d.length),c=a.trim(c.substring(0,c.indexOf("(")-1));y();h.css({display:"block"});l.hide();m.hide();a(".kit-tooltip-tip-bot, .kit-tooltip-tip-top").show();h.css({top:b.offset().top-
h.outerHeight()-2,left:b.offset().left-15}).find(".kit-submit-bar input").val("Submit Exception: "+c);h.offset().top<a(window).scrollTop()+60?(bot=false,a(".kit-tooltip-tip-bot").hide(),h.css({top:b.offset().top+24})):a(".kit-tooltip-tip-top").hide();h.find("form").unbind().bind("submit",function(){l.show();a.ajax({type:"post",global:false,dataType:"json",data:{method:"saveStudentActivityDelivery",_accountId:i,_activityId:g,_deliveryId:j,_classSectionId:r,_inactiveDate:h.find(".kit-entries input").val(),
_accessEventUUID:v,returnFormat:"json"},url:"/com/fullsail/lms/service/remote/Learning.cfc",success:function(a){a.success!==true?m.show().text("An unknown error occurred."):(o(),e.find(".studentName").append('<em style="color:red"> Exception</em>'))},error:function(){m.show().text("An unknown error occurred.")},complete:function(){l.hide()}});return false});return false});a(".student .kit-grade a").live("click",function(){var b=a(this),c=b.parent().parent().parent(),f=c.find(".studentName").text(),
d=c.find(".gradeIcon").attr("href"),h=d.substring(d.indexOf("activityId=")+11,d.indexOf("&deliveryId")),i=d.substring(d.indexOf("deliveryId=")+11,d.indexOf("&accountId")),k=d.substring(d.indexOf("accountId=")+10,d.length),f=a.trim(f.substring(0,f.indexOf("(")-1));y();g.css({display:"block"});g.find(".kit-entries input").val(100);g.find("textarea").val("");u.slider("value",100);l.hide();m.hide();a(".kit-tooltip-tip-bot, .kit-tooltip-tip-top").show();g.css({top:b.offset().top-g.outerHeight()-2,left:b.offset().left-
15}).find(".kit-submit-bar input").val("Submit: "+f);g.offset().top<a(window).scrollTop()+60?(bot=false,a(".kit-tooltip-tip-bot").hide(),g.css({top:b.offset().top+24})):a(".kit-tooltip-tip-top").hide();j.gradingTrue===true&&(l.show(),a.ajax({url:"http://faculty.online.fullsail.edu/index.cfm?fuseaction=lms.gradingsAssignment&activityId="+h+"&accountId="+k,global:false,type:"get",success:function(b){b=a(b).find(".gradeScore strong").text();g.find(".kit-entries input").val(b);u.slider("value",b);l.hide()}}));
g.find("form").unbind().bind("submit",function(){l.show();a.ajax({type:"post",global:false,dataType:"json",data:{_accountId:k,_activityId:h,_deliveryId:i,_classSectionId:r,_accessEventUUID:v,_gradeScore:g.find(".kit-entries input").val(),_comment:g.find(".kit-entries textarea").val(),method:"saveSimpleGrade",returnFormat:"json"},url:"/com/fullsail/lms/service/remote/Learning.cfc",success:function(a){a.success!==true?m.show().text("An unknown error occurred."):(o(),j.gradingTrue===false&&c.fadeOut(function(){c.remove()}))},
error:function(){m.show().text("An unknown error occurred.")},complete:function(){l.hide()}});return false});return false})};(function(){var c=window.location.href;j.setup=c.indexOf("setupActivities")!=-1?true:false;j.grading=c.indexOf("gradings")!=-1&&c.indexOf("activityType=test")==-1?true:false;j.gradingTrue=c.indexOf("isGraded=true")!=-1?true:false;j.reportComplete=c.indexOf("reportsCompletionClass")!=-1?true:false;j.reportGrades=c.indexOf("reportsGradesClass")!=-1?true:false;r=a("[name=classSectionId]").attr("fs:currentclasssectionid");
v=a("[name=termId]").attr("fs:accesseventuuid");a("#headerWrapper").css({paddingTop:54});i=a('<div class="smotherACT" />').insertAfter("#ajaxsitwrap");a('<div class="smotherBox smotherPad smotherBlank">No features are added for this FSO page.</div><div class="smotherBox smotherPad">FSO Status: <span class="ACTstatus actsup">Up</span></div><div class="smotherPad" style="float:left;">FSO-Kit v2.19</div><div class="smotherPad" style="float:left;"><span class="fsovoice-btn"><a target="_blank" href="http://fso.userecho.com/">Give Feedback</a></span></div><div style="clear:both;"></div>').appendTo(i);
k=i.find(".ACTstatus");w=function(){k.removeClass("actsup actsdown").addClass("actsload").text("checking");a.ajax({url:"/com/fullsail/lms/service/remote/Academic.cfc",type:"get",dataType:"json",global:false,timeout:1E4,data:{method:"searchTermsForAccount",_accountId:a('select[name="termId"]').attr("fs:accountId"),_accessEventUUID:a('select[name="termId"]').attr("fs:accessEventUUID"),_SISId:a('select[name="termId"]').attr("fs:SISId"),returnformat:"json"},success:function(a){a.success!="false"?k.addClass("actsup").text("up"):
k.addClass("actsdown").text("down")},error:function(){k.addClass("actsdown").text("down")},complete:function(){k.removeClass("actsload");setTimeout(w,6E4)}})};setTimeout(w,6E4)})();var z=a('<div style="position:fixed; display:none; top:0; left:0; width:100%; height:100%; background:#555; opacity:0.7; z-index:1000;"></div>').insertAfter("#ajaxsitwrap"),t=a('<div style="-moz-box-shadow:0 0 10px black; -webkit-box-shadow:0 0 10px black; position:fixed; display:none; height:30px; padding:12px 16px; background:url(http://codeinfused.com/ajax-loader.gif) no-repeat 93% 50% white; z-index:1001;"><span id="loadertext" style="display:block; height:30px; line-height:30px; padding-right:42px;">Saving changes, please wait ...</span></div>').insertAfter("#ajaxsitwrap"),
g=a('<div class="kit-tooltip-wrap"><div class="kit-tooltip-tip-top"></div><div class="kit-tooltip-tip-bot"></div><div class="kit-tooltip-body tip-grading"><form action="#"><div class="kit-tooltip-top"></div><div class="kit-entries"><p>Grade:</p><input type="text" size="3" value="100" tabindex="1" /><div class="grade-slider"></div><p>Comments:</p><textarea tabindex="2"></textarea><div class="clear"></div></div><div class="kit-submit-bar"><input type="submit" value="Submit grade" /></div></form><div class="clear"></div><div class="kit-loader"></div></div><div class="kit-error">An unknown error occurred.</div></div>').insertAfter("#ajaxsitwrap"),
h=a('<div class="kit-tooltip-wrap"><div class="kit-tooltip-tip-top"></div><div class="kit-tooltip-tip-bot"></div><div class="kit-tooltip-body tip-except"><form action="#"><div class="kit-tooltip-top"></div><div class="kit-entries"><p>Select a date to extend this exception to:</p><input type="text" size="10" value="" tabindex="1" class="exceptDate" /><div class="clear"></div></div><div class="kit-submit-bar"><input type="submit" value="Submit Exception" /></div></form><div class="clear"></div><div class="kit-loader"></div></div><div class="kit-error">An unknown error occurred.</div></div>').insertAfter("#ajaxsitwrap");
h.find("p").css("paddingBottom",5).end().find(".kit-tooltip-body").width(260);h.find(".exceptDate").datepicker({dateFormat:"M. dd, y",showButtonPanel:true,closeText:"Use Existing",beforeShow:function(a,b){s(b)},onChangeMonthYear:function(a,b,e){s(e)}});var l=a(".kit-loader"),m=a(".kit-error"),u=g.find(".grade-slider");g.find(".kit-entries input").bind("keyup",function(){u.slider("value",a(this).val())});u.slider({max:100,step:1,value:100,slide:function(a,b){g.find(".kit-entries input").val(b.value)}});
z.click(function(){o();return false});var y=function(){z.css({display:"block"})},o=function(){z.css({display:"none"});t.css({display:"none"});g.css({display:"none"});h.css({display:"none"})};a.each(j,function(a,b){try{if(b===true&&a!=="gradingTrue")q[a]()}catch(e){}})}})(jQuery);